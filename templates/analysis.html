{% extends "base.html" %}

{% block judul_halaman %}
  Dasbor - {{nama_hashtag}}
{% endblock %}

{% block ext %}
  <script type='text/javascript' src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', {'packages' :['corechart']});

    google.charts.setOnLoadCallback(LineChart);

      function LineChart() {

        var line = new google.visualization.ChartWrapper({
          'chartType': 'LineChart',
          'containerId': 'LineChart',
          'dataTable' : {{line_data|safe}},
          'options' : {
            'width':650,
            'height':215,
            'legend': { 'position': 'top' }
          },
          'view': {'columns': [0,1,2]}
        });

        line.draw();

        AllTweet = function() {
          line.setView({'columns': [0,1,2]});
          line.draw();
        };

        TweetHashtag = function() {
          line.setView({'columns': [0,1]});
          line.draw();
        };

        TweetNoHashtag = function() {
          line.setView({'columns': [0,2]});
          line.draw();
        };
    }

  </script>
{% endblock %}

{% block bebas %}
  <form method="POST">
    {% csrf_token %}
    <div class="row justify-content-center" style="margin-left:50px; margin-top:-50px">

      <div class="col-md-1">
        <h2></h2><h2></h2><a class="btn btn-info" style="width:90px" href="{% url 'home:detail' isu_id %}">&#8592; Kembali</a>
      </div>

      <div class="form-group col-md-3">
        <label for="bulan1">Dari bulan : </label>
        <select class="form-control" id="bulan1" name="bulan1">
          {% for bln in bulan_list %}
            {% if bln == bulan1_current %}
              <option selected="selected" value={{bln}}>{{bln}}</option>
            {% else %}
              <option value={{bln}}>{{bln}}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="form-group col-md-3">
        <label for="bulan2">Hingga bulan : </label>
        <select class="form-control" id="bulan2" name="bulan2">
          {% for bln in bulan_list %}
            {% if bln == bulan2_current %}
              <option selected="selected" value={{bln}}>{{bln}}</option>
            {% else %}
              <option value={{bln}}>{{bln}}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="form-group col-md-3">
        <label for="tahun">Tahun : </label>
        <select class="form-control" id="tahun" name="tahun">
          {% for thn in tahun_list %}
            {% if thn == tahun_current %}
              <option selected="selected" value={{thn}}>{{thn}}</option>
            {% else %}
              <option value={{thn}}>{{thn}}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="col-md-1">
        <h2></h2><h2></h2><button type="submit" class="btn btn-dark">Filter</button>
      </div>

  </div>

  </form>


  <div class="row" style="margin-left:1px;margin-right:30px">

    <div class="col-6">
      <table>
        <tbody>
          <tr>
            <td><button type="button" class="btn btn-outline-primary" onclick="AllTweet()" style="width:216px">Semua Tweet</button></td>
            <td><button type="button" class="btn btn-outline-primary" onclick="TweetHashtag()" style="width:216px">Tweet Dengan Hashtag</button></td>
            <td><button type="button" class="btn btn-outline-primary" onclick="TweetNoHashtag()" style="width:216px">Tweet Tanpa Hashtag</button></td>
          </tr>
          <tr><td colspan="3"><div id="LineChart" style="border:1px solid"></div></td></tr>
        </tbody>
      </table>
    </div>

    <div class="col-6">
      <div class="container bg-info" style="border:1px solid; height:254px;width:640px  ">
        <div id="TweetList" class="carousel slide">
          <div class="carousel-inner">
            <div class="carousel-item active" data-interval="3000">
              <div class="row justify-content-center"><h1>{{nama_hashtag}}</h1></div>
            </div>
            {% for t in tweet_list %}
            <div class="carousel-item" data-interval="10000">
              <div class="row">
                <div class="col"><h2>@{{t.user_id}}</h2></div>
                <div class="col offset-md-auto"><h3>{{t.waktu}}</h3></div>
              </div>
              <div class="row text-white">
                <div class="col"><br><br><h5>{{t.teks}}</h5></div>
              </div>
            </div>
            {% endfor %}
          </div>
          <a class="carousel-control-prev" href="#TweetList" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#TweetList" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>

  </div>

  <div class="row" style="margin-left:18px; margin-top:10px">{{map|safe}}</div>

{% endblock %}
